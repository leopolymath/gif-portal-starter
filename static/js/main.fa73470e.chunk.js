(this["webpackJsonpleo-solana-tweets-portal"]=this["webpackJsonpleo-solana-tweets-portal"]||[]).push([[0],{108:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":7,"1":45,"2":242,"3":227,"4":129,"5":212,"6":48,"7":227,"8":239,"9":84,"10":148,"11":228,"12":35,"13":251,"14":16,"15":1,"16":132,"17":137,"18":153,"19":222,"20":147,"21":107,"22":172,"23":1,"24":12,"25":164,"26":176,"27":51,"28":231,"29":136,"30":156,"31":176},"secretKey":{"0":171,"1":133,"2":20,"3":201,"4":196,"5":155,"6":155,"7":32,"8":55,"9":26,"10":67,"11":206,"12":83,"13":10,"14":30,"15":13,"16":118,"17":207,"18":166,"19":148,"20":88,"21":19,"22":229,"23":217,"24":69,"25":201,"26":40,"27":63,"28":160,"29":249,"30":117,"31":154,"32":7,"33":45,"34":242,"35":227,"36":129,"37":212,"38":48,"39":227,"40":239,"41":84,"42":148,"43":228,"44":35,"45":251,"46":16,"47":1,"48":132,"49":137,"50":153,"51":222,"52":147,"53":107,"54":172,"55":1,"56":12,"57":164,"58":176,"59":51,"60":231,"61":136,"62":156,"63":176}}}')},115:function(e,t,n){},118:function(e,t){},121:function(e,t){},136:function(e,t){},152:function(e,t){},153:function(e,t){},171:function(e,t){},173:function(e,t){},179:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var c=n(8),r=n.n(c),a=n(104),o=n.n(a),s=(n(115),n(1)),i=n.n(s),u=n(3),l=n(11),p=n.p+"static/media/twitter-logo.d89d9a86.svg",f=n(109),d=n(10),b=n(27),g=(n(179),{version:"0.0.0",name:"twitterportal",instructions:[{name:"startStuffOff",accounts:[{name:"baseAccount",isMut:!0,isSigner:!0},{name:"user",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addGif",accounts:[{name:"baseAccount",isMut:!0,isSigner:!1},{name:"user",isMut:!0,isSigner:!0}],args:[{name:"gifLink",type:"string"}]}],accounts:[{name:"BaseAccount",type:{kind:"struct",fields:[{name:"totalGifs",type:"u64"},{name:"gifList",type:{vec:{defined:"ItemStruct"}}}]}}],types:[{name:"ItemStruct",type:{kind:"struct",fields:[{name:"gifLink",type:"string"},{name:"userAddress",type:"publicKey"}]}}],metadata:{address:"CHiAY4vVe5TboHwBiAYz6CFzWzAtV1eumNHjD9Ac91GF"}}),m=n(108),j=n(17),h="_buildspace",v="https://twitter.com/".concat(h),w=b.d.SystemProgram,y=(b.d.Keypair,Object.values(m._keypair.secretKey)),x=new Uint8Array(y),O=b.d.Keypair.fromSecretKey(x),k=new d.PublicKey(g.metadata.address),S=Object(d.clusterApiUrl)("devnet"),K="processed",A=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(l.a)(a,2),s=o[0],m=o[1],y=Object(c.useState)(null),x=Object(l.a)(y,2),A=x[0],N=x[1],C=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=7;break}return e.next=4,n.connect();case 4:c=e.sent,console.log("Connected with Public Key:",c.publicKey.toString()),r(c.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=new d.Connection(S,K);return new b.b(e,window.solana,K)},F=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.solana)){e.next=12;break}if(!n.isPhantom){e.next=10;break}return console.log("Phantom wallet found!"),e.next=7,n.connect({onlyIfTrusted:!0});case 7:c=e.sent,console.log("Connected with Public Key:",c.publicKey.toString()),r(c.publicKey.toString());case 10:e.next=13;break;case 12:alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=P(),console.log("const provider = getProvider();"),n=new b.a(g,k,t),console.log("after new Program(idl, programID, provider);"),e.next=7,n.account.baseAccount.fetch(O.publicKey);case 7:c=e.sent,console.log("Got the account",c),N(c.gifList),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error in getGifList: ",e.t0),N(null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){window.addEventListener("load",function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.useEffect)((function(){n&&(console.log("Fetching GIF list..."),I())}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:n?"authed-container":"container",children:[Object(j.jsxs)("div",{className:"header-container",children:[Object(j.jsx)("p",{className:"header",children:"\ud83d\udc26 Solana Tweets collection"}),Object(j.jsx)("p",{className:"sub-text",children:"From Leo: view your tweets collection in the metaverse \u2728"}),!n&&Object(j.jsx)("button",{className:"cta-button connect-wallet-button",onClick:C,children:"Connect to Wallet"}),n&&function(){var e=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===s.length&&console.log("Empty input. Try again."),console.log("Tweet link:",s),e.prev=2,t=P(),n=new b.a(g,k,t),e.next=7,n.rpc.addGif(s,{accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey}});case 7:return console.log("GIF successfully sent to program",s),e.next=10,I();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("Error sending GIF:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=P(),n=new b.a(g,k,t),console.log("ping"),e.next=6,n.rpc.startStuffOff({accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey,systemProgram:w.programId},signers:[O]});case 6:return console.log("Created a new BaseAccount w/ address:",O.publicKey.toString()),e.next=9,I();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error creating BaseAccount account:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return null===A?Object(j.jsx)("div",{className:"connected-container",children:Object(j.jsx)("button",{className:"cta-button submit-gif-button",onClick:t,children:"Do One-Time Initialization For GIF Program Account"})}):Object(j.jsxs)("div",{className:"connected-container",children:[Object(j.jsx)("input",{type:"text",placeholder:"Enter your tweet id!",value:s,onChange:function(e){var t=e.target.value;m(t)}}),Object(j.jsx)("button",{className:"cta-button submit-gif-button",onClick:e,children:"Submit"}),Object(j.jsx)("div",{className:"gif-grid",children:A.map((function(e,t){return Object(j.jsx)("div",{children:Object(j.jsx)(f.a,{tweetId:e.gifLink})},"".concat(t,"-").concat(e.gifLink))}))})]})}()]}),Object(j.jsxs)("div",{className:"footer-container",children:[Object(j.jsx)("img",{alt:"Twitter Logo",className:"twitter-logo",src:p}),Object(j.jsx)("a",{className:"footer-text",href:v,target:"_blank",rel:"noreferrer",children:"built on @".concat(h)})]})]})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root")),N()}},[[181,1,2]]]);
//# sourceMappingURL=main.fa73470e.chunk.js.map